<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yaic.app.common.dao.UserDao">
    <resultMap id="userResultMap" type="com.yaic.app.common.dto.domain.UserDto">
        <id property="userId" column="USER_ID" jdbcType="VARCHAR"></id>
        <result property="mobile" column="MOBILE" jdbcType="VARCHAR"></result>
        <result property="userName" column="USER_NAME" jdbcType="VARCHAR"></result>
        <result property="passWord" column="PASSWORD" jdbcType="VARCHAR"></result>
        <result property="email" column="EMAIL" jdbcType="VARCHAR"></result>
        <result property="createdDate" column="CREATED_DATE" jdbcType="TIMESTAMP"></result>
        <result property="userNickname" column="USER_NICKNAME" jdbcType="VARCHAR"></result>
        <result property="userImgUrl" column="USER_IMG_URL" jdbcType="VARCHAR"></result>
        <result property="userCertificateName" column="USER_CERTIFICATE_NAME" jdbcType="VARCHAR"></result>
        <result property="userCertificateNumber" column="USER_CERTIFICATE_NUMBER" jdbcType="VARCHAR"></result>
    </resultMap>
    
     <select id="selectOne" parameterType="com.yaic.app.common.dto.domain.UserDto" resultMap="userResultMap">
    	 select a.USER_ID,a.MOBILE,a.USER_NAME,a.PASSWORD,a.EMAIL,a.CREATED_DATE,a.USER_NICKNAME,a.USER_IMG_URL,a.USER_CERTIFICATE_NAME,a.USER_CERTIFICATE_NUMBER
    	 FROM APP_USER a
		<where>
			1=1
			<if test="userName != null and userName != ''">
				AND a.USER_NAME = #{userName} 
			</if>
			<if test="mobile != null and mobile != ''">
				AND a.MOBILE = #{mobile} 
			</if>
			<if test="userId != null and userId != '' ">
				AND a.USER_ID = #{userId} 
			</if>
		</where>
     </select>
     <update id="updateUser"  parameterType="com.yaic.app.common.dto.domain.UserDto">
		 UPDATE  APP_USER A 
		 <set>
           <if test="passWord != null and passWord != '' ">
               A.PASSWORD = #{passWord},
            </if>
            <if test="userNickname != null and userNickname != '' ">
               A.USER_NICKNAME = #{userNickname},
            </if>
            <if test="userImgUrl != null and userImgUrl != '' ">
               A.USER_IMG_URL = #{userImgUrl},
            </if>
        </set>
		 WHERE A.USER_ID =  #{userId}
	 </update>
      <insert id="insert" parameterType="com.yaic.app.common.dto.domain.UserDto">
	     insert into app_user (
	     USER_ID,MOBILE,USER_NAME,PASSWORD,EMAIL,CREATED_DATE,USER_NICKNAME,USER_IMG_URL,USER_CERTIFICATE_NAME,USER_CERTIFICATE_NUMBER)
	     values (#{userId}, #{mobile},#{userName},#{passWord},#{email},#{createdDate},#{userNickname},#{userImgUrl},#{userCertificateName},#{userCertificateNumber})
	  </insert>
	   <update id="updateIdentity"  parameterType="com.yaic.app.common.dto.domain.UserDto">
		 UPDATE  APP_USER A SET A.USER_CERTIFICATE_NAME =#{userCertificateName} ,A.USER_CERTIFICATE_NUMBER = #{userCertificateNumber} WHERE A.USER_ID =  #{userId}
	 </update>
</mapper>